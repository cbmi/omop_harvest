define(["underscore","backbone","./models/base"],function(t,e,i){var n=e.Model.extend({defaults:{visible:!0},show:function(){this.set({visible:!0})},hide:function(){this.set({visible:!1})}}),s=e.Collection.extend({model:n}),o=e.Model.extend({constructor:function(t,i,s){i instanceof n||(i=new n(i)),this.index=i,e.Model.prototype.constructor.call(this,t,s)},size:function(){return 1},width:function(){return 1}}),r=e.Collection.extend({constructor:function(i,n,s){this.indexes=n;var r=this;this.model=function(e,i){var n=r.indexes.at(t.keys(r._byId).length);o.prototype.constructor.call(this,{value:e},n,i)},this.model.prototype=o.prototype,e.Collection.prototype.constructor.call(this,i,s)}}),a=e.Model.extend({constructor:function(i,n,o){var a;o||(o={}),n instanceof s||(n=new s(n)),this.indexes=n,t.isArray(i)?(a=i,i=null):o.parse=!0,this.data=new r(a,n),e.Model.prototype.constructor.call(this,i,o)},parse:function(t,e){return this.data.reset(t.values,e),delete t.values,t},isColumn:function(){return 1===this.width()},isRow:function(){return!this.isColumn()},size:function(){return this.isColumn()?this.data.length:1},width:function(){return this.indexes.length}}),h=e.Collection.extend({constructor:function(t,i,n){this.indexes=i,e.Collection.prototype.constructor.call(this,t,n);var s=this;this.model=function(t,e){a.prototype.constructor.call(this,t,s.indexes,e)},this.model.prototype=a.prototype}}),l=i.Model.extend({constructor:function(e,n,o){var r;o||(o={}),n instanceof s||(n=new s(n)),this.indexes=n,t.isArray(e)?(r=e,e=null):o.parse=!0,this.series=new h(r,n),i.Model.prototype.constructor.call(this,e,o)},parse:function(t,e){return i.Model.prototype.parse.call(this,t,e),this.indexes.reset(t.keys,e),this.series.reset(t.objects,e),delete t.keys,delete t.objects,t},size:function(){return this.series.length},width:function(){return this.indexes.length},column:function(t){var e=this.series.map(function(e){return e.data.at(t)});return new a(e,this.indexes.at(t))}}),u=i.Collection.extend({model:l,constructor:function(t,e){this.indexes=new s,this.on("reset",function(t){var e=t.models[0];return e?this.indexes.reset(e.indexes.models):void 0}),this.on("add",function(t,e){return 1===e.length?this.indexes.reset(t.indexes.models):void 0}),i.Collection.prototype.constructor.call(this,t,e)}});return{Datum:o,Frame:l,FrameArray:u,Index:n,Indexes:s,Series:a}});
//@ sourceMappingURL=structs.js.map