define(["underscore","backbone","marionette","../../core","./base"],function(e,t,i,n,s){var o=i.ItemView.extend({template:function(){},tagName:"option",modelEvents:{"change:selected":"render"},onRender:function(){var e=this.model.get("label");""===e?this.$el.text("(empty)"):"null"===e?this.$el.text("(null)"):this.$el.text(e),this.$el.attr("value",this.model.get("value")),this.$el.attr("selected",this.model.get("selected"))}}),r=s.ControlCompositeView.extend({className:"selection-list",template:"controls/select/list",itemView:o,itemViewOptions:function(e){return{model:e}},itemViewContainer:".items",ui:{items:".items"},events:{"change .items":"onSelectionChange"},collectionEvents:{reset:"onCollectionSync"},initialize:function(){var e;if(this.wait(),!this.collection){this.collection=new t.Collection,e=n.isSupported("2.3.1")?0:1e3;var i=this;this.model.values({limit:e}).done(function(e){return i.collection.reset(e.values),i.ready()})}this.on("ready",function(){this.change()})},onCollectionSync:function(){this.render()},onSelectionChange:function(){this.change()},getField:function(){return this.model.id},getOperator:function(){return"exact"},getValue:function(){return this.ui.items.val()},setValue:function(e){this.ui.items.val(e)},validate:function(t){return e.isNull(t.value)||e.isUndefined(t.value)?"An option must be selected":void 0}}),a=r.extend({onCollectionSync:function(){this.render()},onSelectionChange:function(){var e=this;this.ui.items.children().each(function(t,i){e.collection.models[t].set("selected",i.selected)}),this.change()},onRender:function(){this.ui.items.attr("multiple",!0)},getOperator:function(){return"in"},getValue:function(){return e.map(this.collection.where({selected:!0}),function(e){return e.get("value")})},setValue:function(e){e||(e=[]),this.collection.each(function(t){t.set("selected",e.indexOf(t.get("value"))>=0)})},validate:function(e){return e.value&&e.value.length?void 0:"At least one option must be selected"}});return{SingleSelectionList:r,MultiSelectionList:a}});
//@ sourceMappingURL=select.js.map