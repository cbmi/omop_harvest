define(["jquery","underscore","../base","./core","./utils"],function(t,e,i,n,s){var o=i.LoadView.extend({message:"Chart loading..."}),r=n.Chart.extend({template:"charts/chart",loadView:o,ui:{chart:".chart",heading:".heading",status:".heading .status"},initialize:function(){e.bindAll(this,"chartClick","setValue")},showLoadView:function(){var t=new this.loadView;t.render(),this.ui.chart.html(t.el)},chartClick:function(t){t.point.select(!t.point.selected,!0),this.change()},interactive:function(t){var e;return t.chart&&(e=t.chart.type),"pie"===e||"column"===e&&t.xAxis.categories?!0:!1},getChartOptions:function(e){var i=s.processResponse(e,[this.model]);return i.clustered?this.ui.status.text("Clustered").show():this.ui.status.hide(),this.interactive(i)&&this.setOptions("plotOptions.series.events.click",this.chartClick),t.extend(!0,i,this.chartOptions),i.chart.renderTo=this.ui.chart[0],i},getField:function(){return this.model.id},getValue:function(){return e.pluck(this.chart.getSelectedPoints(),"category")},getOperator:function(){return"in"},removeChart:function(){n.Chart.prototype.removeChart.apply(this,arguments),this.node&&this.node.destroy()},onRender:function(){this.options.parentView&&this.ui.chart.width(this.options.parentView.$el.width()),this.showLoadView();var t=this;this.model.distribution(function(i){if(!t.isClosed){i.data=e.sortBy(i.data,function(t){return t.values[0]});var n=t.getChartOptions(i);i.size?t.renderChart(n):t.showEmptyView(n)}})},setValue:function(t){if(e.isArray(t)||(t=[]),null!==this.chart)for(var i,n,s=this.chart.series[0].points,o=0;o<s.length;o++)i=s[o],n=!1,(null!==i.name||-1!==t.indexOf(i.category))&&(n=!0),i.select(n,!0)}});return{FieldChart:r}});
//@ sourceMappingURL=dist.js.map