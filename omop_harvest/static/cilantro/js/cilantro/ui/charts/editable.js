define(["jquery","underscore","./dist","./axis"],function(t,e,i,n){var s=i.FieldChart.extend({template:"charts/editable-chart",toolbarAnimationTime:200,formAnimationTime:300,events:e.extend({"click .fullsize":"toggleExpanded"},i.FieldChart.prototype.events),ui:e.extend({toolbar:".btn-toolbar",fullsizeToggle:".fullsize",form:".editable",xAxis:"[name=x-Axis]",yAxis:"[name=y-Axis]",series:"[name=series]"},i.FieldChart.prototype.ui),onRender:function(){this.options.editable===!1?(this.ui.form.detach(),this.ui.toolbar.detach()):(this.xAxis=new n.FieldAxis({el:this.ui.xAxis,collection:this.collection}),this.yAxis=new n.FieldAxis({el:this.ui.yAxis,collection:this.collection}),this.series=new n.FieldAxis({el:this.ui.series,enumerableOnly:!0,collection:this.collection}),this.model&&(this.model.get("xAxis")&&this.ui.form.hide(),this.model.get("expanded")?this.expand():this.contract()))},customizeOptions:function(e){if(this.ui.status.detach(),this.ui.heading.text(e.title.text),e.title.text="",!e.series[0])return this.ui.chart.html("<p class=no-data>Unfortunately, there is no data to graph here.</p>"),void 0;this.ui.form.hide();var i=[];return e.clustered&&i.push("Clustered"),i[0]&&(this.ui.status.text(i.join(", ")).show(),this.ui.heading.append(this.$status)),this.interactive(e)&&this.enableChartEvents(),t.extend(!0,e,this.chartOptions),e.chart.renderTo=this.ui.chart[0],e},changeChart:function(t){t&&t.preventDefault();var e=this;this.collection.when(function(){var i,n,s,o;if((null===t||"undefined"==typeof t)&&(i=e.model.get("xAxis"),i&&e.xAxis.$el.val(i.toString()),n=e.model.get("yAxis"),n&&e.yAxis.$el.val(n.toString()),s=e.model.get("series"),s&&this.series.$el.val(s.toString())),i=e.xAxis.getSelected(),n=e.yAxis.getSelected(),s=e.series.getSelected(),i){var r=e.model.get("_links").distribution.href,a=[i],l="dimension="+i.id;n&&(a.push(n),l=l+"&dimension="+n.id),s&&(o=n?2:1,l=l+"&dimension="+s.id),t&&e.model&&e.model.set({xAxis:i.id,yAxis:n?n.id:null,series:s?s.id:null}),e.update(r,l,a,o)}})},disableSelected:function(e){var i=t(e.target);this.xAxis.el===e.target?(this.yAxis.$("option").prop("disabled",!1),this.series.$("option").prop("disabled",!1)):this.yAxis.el===e.target?(this.xAxis.$("option").prop("disabled",!1),this.series.$("option").prop("disabled",!1)):(this.xAxis.$("option").prop("disabled",!1),this.yAxis.$("option").prop("disabled",!1));var n=i.val();""!==n&&(this.xAxis.el===e.target?(this.yAxis.$("option[value="+n+"]").prop("disabled",!0).val(""),this.series.$("option[value="+n+"]").prop("disabled",!0).val("")):this.yAxis.el===e.target?(this.xAxis.$("option[value="+n+"]").prop("disable",!0).val(""),this.series.$("option[value="+n+"]").prop("disable",!0).val("")):(this.xAxis.$("option[value="+n+"]").prop("disable",!0).val(""),this.yAxis.$("option[value="+n+"]").prop("disable",!0).val("")))},toggleExpanded:function(){var t=this.model.get("expanded");t?this.contract():this.expand(),this.model.save({expanded:!t})},resize:function(){var t=this.ui.chart.width();this.chart&&this.chart.setSize(t,null,!1)},expand:function(){this.$fullsizeToggle.children("i").removeClass("icon-resize-small").addClass("icon-resize-full"),this.$el.addClass("expanded"),this.resize()},contract:function(){this.$fullsizeToggle.children("i").removeClass("icon-resize-full").addClass("icon-resize-small"),this.$el.removeClass("expanded"),this.resize()},hideToolbar:function(){this.ui.toolbar.fadeOut(this.toolbarAnimationTime)},showToolbar:function(){this.ui.toolbar.fadeIn(this.toolbarAnimationTime)},toggleEdit:function(){this.ui.form.is(":visible")?this.ui.form.fadeOut(this.formAnimationTime):this.ui.form.fadeIn(this.formAnimationTime)}});return{EditableFieldChart:s}});
//@ sourceMappingURL=editable.js.map